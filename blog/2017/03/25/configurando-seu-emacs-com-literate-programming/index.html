<!DOCTYPE html>
<html lang="en">
        <head>
                <meta charset="utf-8">
                <title>Configurando seu Emacs com Literate Programming</title>
                <meta name="description" content="Para quem ainda não ouviu falar, Org-mode é um mode para Emacs que permite que você faça uma série de tarefas em texto puro, como por exemplo: manter TODO lists, planejar projetos, criar documentos e muito mais. Além disso você pode exportar para vários f...">
                <meta name="author"      content="Édipo Luis Féderle">
                <meta name="keywords"    content="emacs">
                <meta name="viewport"    content="width=device-width, initial-scale=1.0">
                <link rel="icon"      href="/favicon.ico">
                <link rel="canonical" href="http://edipofederle.github.io/blog/2017/03/25/configurando-seu-emacs-com-literate-programming/">

                <link rel="prev" href="/blog/2017/03/25/get-request-with-haskell/">
                <!-- CSS -->
                <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Merriweather+Sans:400,300,300italic,400italic,700,700italic,800,800italic|Merriweather:400,300,300italic,400italic,700,700italic,900,900italic|Source+Code+Pro:200,300,400,500,600,700,900">
                <link rel="stylesheet" type="text/css" href="/css/application.min.css">
                <link rel="stylesheet" type="text/css" href="/css/pygments.min.css">
                <!-- Feeds -->
                <link rel="alternate" type="application/atom+xml"
                                        href="/feeds/all.atom.xml" title="Atom Feed">
                <link rel="alternate" type="application/rss+xml"
                                        href="/feeds/all.rss.xml" title="RSS Feed">
                <!-- JS -->
                <!-- <script src="/js/application.min.js"></script> -->
                <script type="text/javascript">
                  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

                  ga('create', '', 'auto');
                  ga('send', 'pageview');
                </script>
        </head>
        <body>
                <div id="page-content">
                        <!-- Navigation Bar -->
                        <header>
                                <nav role="navigation" class="navigation-bar">
                                        <ul class="navigation-items left">
                                                <li id="blog-title-header"><a href="/"><h1>Elf blog</h1></a></li>
                                        </ul>
                                        <ul class="navigation-items center"></ul>
                                        <ul class="navigation-items right">
                                                <li><a href="/">Home</a></li>
                                                <li><a href="/academia.html">Academia</a></li>
                                                <li><a href="/photography.html">Photography</a></li>
                                        </ul>
                                </nav>
                        </header>
                        <section role="main">
                                <!-- Main column -->
                                <div class="content" class="col-md-12">



                                        <article class="main">
  <header>
    <h1 class="title">Configurando seu Emacs com Literate Programming</h1>
    <div class='date-and-tags'>
      <time datetime="2017-03-25T20:39:33">
        2017-03-25
      </time>
      <span style="margin: 0 3px">⦿</span>
      <span class="tags"><a href="/tags/emacs.html">emacs</a></span>
    </div>
  </header>

<p>Para quem ainda não ouviu falar, <a href="http://orgmode.org/">Org-mode</a> é um mode para <a href="https://www.gnu.org/software/emacs/">Emacs</a> que permite que você faça uma série de tarefas em texto puro, como por exemplo: manter TODO lists, planejar projetos, criar documentos e muito mais. Além disso você pode exportar para vários formatos, como PDF, HTML, txt, tex e outros. Sério, você pode fazer QUASE tudo com isso. O suporte a tabelas é simplesmente animal, de uma olhada.</p>

<p>Esse post irá abordar como podemos executar código dentro de um documento .org e como usar isso para organizar as configurações do nosso Emacs.</p>
<!-- more-->

<p>Para começar vamos dando uma olhada em um documento .org:</p>

<pre><code>* Introdução (tipo h1 no HTML)
  Esse capítulo tem como objectivo explicar como
  lançar um foguete para o *espaço*</code></pre>

<p>** Contextualização (tipo h2 no HTML) Como você pode ver, é bem similar a um arquivo no formato Markdown. Assim como nesse formato, podemos introduzir um trecho de código:</p>

<pre><code>   #+BEGIN_SRC ruby
	 def fac(n)
	   (1..n).inject(:*) || 1
	 end
   #+END_SRC</code></pre>

<p>Veja um exemplo em execução:</p>

<div class="figure"><img src="https://www.dropbox.com/s/80ir5bcw1qrza21/org-mode-code.gif?raw=1" alt="" />
 <p class="caption"></p></div>

<p>Para inserir um novo bloco de código você pode digitar <code>&lt;s &lt;TAB&gt;</code> que será completado o restante para você. Após isso é preciso informar a linguagem, por exemplo, Ruby. Uma vez com o cursor dentro do bloco de código você pode ativar <code>C-'</code> para ir para o modo de inserção, e novamente <code>C-'</code> para salvar e sair.</p>

<p>Isso é possível graças ao pacote <a href="http://orgmode.org/worg/org-contrib/babel/">babel</a>. Com ele você pode adicionar código (várias linguagens) dentro de um documento .org. Esse tipo de capacidade torna, forneceida pelo babel, torna Org-mode uma ferramenta poderosa para Literate Programming e Reproducible Research.</p>

<p>O que nos leva a forma como vamos organizar a configuração do Emacs.</p>

<h2 id="literate-emacs-initialization">Literate Emacs Initialization</h2>

<p>Babel fornece uma função chamada org-babel-load-file que recebe um arquivo .org e processa os códigos em Emacs Lisp encontrados no mesmo.</p>

<p>Dessa forma, tornando nossas configurações mais fáceis de entender e manter. Além disso, temos todas as funcionalidades presentes no Org-mode, como formatações, exportações, tags e muito mais.</p>

<p>Algumas pessoas preferem separar em vários arquivos a configuração do Emacs, eu fazia isso até semana passada. Na realidade, existem algumas coisas onde o melhor mesmo é um único arquivo.</p>

<p>Para começar usar isso na sua configuração, primeiro faça um backup do estado atual do seu .emacs.d (mv .emacs.d emacs.d.bkp) Feito isso, crie novamente o diretório, e adicione o arquivo init.d.</p>

<pre><code>cd ~
mkdir .emacs.d
cd .emacs.d
touch init.el</code></pre>

<p>Aadicione a seguninte linha de Emacs Lisp no init.el</p>

<div class="brush: emacs-lisp">
 <div class="source">
  <pre><span></span><span class="p">(</span><span class="nv">org-babel-load-file</span> <span class="s">"~/.emacs.d/configurations.org"</span><span class="p">)</span>
</pre></div>

</div>

<p>Agora criei o arquivo configurations.org, dentro de .emacs.d, e adicione o seguinte:</p>

<div class="brush: org-mode">
 <div class="source">
  <pre><span></span>#+TITLE: My Emacs configurations

* Basic UI Configurations
  These customizations change the way emacs looks and disable/enable
  some user interface elements.

** Turn off the menu bar at the top of each frame because it&#39;s distracting

 #+BEGIN_SRC emacs-lisp
   (menu-bar-mode -1)
 #+END_SRC

** Don&#39;t show native OS scroll bars for buffers because they&#39;re redundant

 #+BEGIN_SRC emacs-lisp
   (when (fboundp &#39;tool-bar-mode)
	 (tool-bar-mode -1))
 #+END_SRC
* Org-mode
** Display preferences

*** Bullets instead of a list of asterisks.

   #+BEGIN_SRC emacs-lisp
	  (add-hook &#39;org-mode-hook
				(lambda ()
				  (org-bullets-mode t)))
   #+END_SRC

*** A pretty arrow instead of the usual ellipsis (...)

   #+BEGIN_SRC emacs-lisp
	 (setq org-ellipsis "⤵")
   #+END_SRC

*** Babel
   Enable languages

   #+BEGIN_SRC emacs-lisp
	 (org-babel-do-load-languages
	  &#39;org-babel-load-languages &#39;((ruby . t)))
   #+END_SRC
</pre></div>

</div>

<p>Após salvar e reiniciar o emacs, você verá algo como:</p>

<div class="figure"><img src="https://www.dropbox.com/s/rxvvdbj5yas5tqc/conforg.png?raw=1" alt="" />
 <p class="caption"></p></div>

<p>OBS: Lembrando que na configuração acima usei um pacote que precisa estar instalados: org-bullets-mode.</p>

<p>Seguindo esse padrão você pode estruturar sua configuração de uma forma muito descritiva e organizada. O arquivo configurations.org pode crescer bastante, dependendo de o quanto você customiza e configura novas coisas dentro do Emacs. Eu não vejo problema nisso, uma fez que no Org-mode podemos esconder as seções e deixar visível somente o necessário.</p>

<p>Era isso, meu .emacs.d pode ser encontrado <a href="https://github.com/edipofederle/emacs.d">aqui</a>, caso lhe interesse. Se você gostou desse post, ou tiver qualquer colocação a fazer, fique a vontade em deixar um comentário ou enviar uma mensagem no Twitter (@edipofederle).</p>

<p>= paz</p>
  <footer>
    <script type="text/javascript">
      var disqus_shortname = 'edipofederle';
      (function() {
          var dsq = document.createElement('script');
          dsq.type = 'text/javascript';
          dsq.async = true;
          dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
    </script>
    <div id="disqus_thread"></div>
    <ul class="pager">
    <li class="previous">
      <a href="/blog/2017/03/25/get-request-with-haskell/">&larr; <em>Get Request with Haskell</em></a>
    </li>

    </ul>
  </footer>
</article>
                                </div>
                        </section>
                        <footer>
                                <div class="content">
                                        <h2 id="copyright-notice">© 2017, Édipo L Féderle</h2>
                                        <h3>
                                                Built with <a href="https://github.com/greghendershott/frog">Frog</a>, the
                                                <strong>fr</strong>ozen bl<strong>og</strong> tool. Forket <a href="https://github.com/lexi-lambda/lexi-lambda.github.io">from</a>
                                        </h3>
                                        <h3>
                                                Feeds are available via <a href="/feeds/all.atom.xml">Atom</a>
                                                or <a href="/feeds/all.rss.xml">RSS</a>.
                                        </h3>
                                </div>
                        </footer>
                </div>
        </body>
</html>